2025-03-13 17:53:31.985 +07:00 [INF] Đang cập nhật cấu hình từ Google Sheets
2025-03-13 17:53:32.508 +07:00 [ERR] Lỗi Google Sheets API: "BadRequest"
2025-03-13 17:53:32.541 +07:00 [WRN] Lần thử lại 1 kết nối đến Google Sheets sau 2s. Lỗi: Lỗi API Google Sheets: BadRequest
2025-03-13 17:53:34.792 +07:00 [ERR] Lỗi Google Sheets API: "BadRequest"
2025-03-13 17:53:34.807 +07:00 [WRN] Lần thử lại 2 kết nối đến Google Sheets sau 4s. Lỗi: Lỗi API Google Sheets: BadRequest
2025-03-13 17:53:39.040 +07:00 [ERR] Lỗi Google Sheets API: "BadRequest"
2025-03-13 17:53:39.052 +07:00 [WRN] Lần thử lại 3 kết nối đến Google Sheets sau 8s. Lỗi: Lỗi API Google Sheets: BadRequest
2025-03-13 17:53:47.275 +07:00 [ERR] Lỗi Google Sheets API: "BadRequest"
2025-03-13 17:53:47.317 +07:00 [ERR] Lỗi khi truy cập Google Sheets API: Lỗi API Google Sheets: BadRequest
System.Net.Http.HttpRequestException: Lỗi API Google Sheets: BadRequest
   at adapter_BHYT.Services.GoogleSheetsService.<>c__DisplayClass15_0.<<GetSheetDataAsync>b__0>d.MoveNext() in D:\Hospital-TĐ-UB\Cảnh báo BHYT\GiamDInhBHYT\adapter_BHYT\adapter_BHYT\Services\GoogleSheetsService.cs:line 168
--- End of stack trace from previous location ---
   at Polly.Retry.AsyncRetryEngine.ImplementationAsync[TResult](Func`3 action, Context context, CancellationToken cancellationToken, ExceptionPredicates shouldRetryExceptionPredicates, ResultPredicates`1 shouldRetryResultPredicates, Func`5 onRetryAsync, Int32 permittedRetryCount, IEnumerable`1 sleepDurationsEnumerable, Func`4 sleepDurationProvider, Boolean continueOnCapturedContext)
   at Polly.AsyncPolicy.ExecuteAsync[TResult](Func`3 action, Context context, CancellationToken cancellationToken, Boolean continueOnCapturedContext)
   at adapter_BHYT.Services.GoogleSheetsService.GetSheetDataAsync() in D:\Hospital-TĐ-UB\Cảnh báo BHYT\GiamDInhBHYT\adapter_BHYT\adapter_BHYT\Services\GoogleSheetsService.cs:line 156
2025-03-13 17:53:47.398 +07:00 [ERR] Lỗi khi cập nhật cấu hình từ Google Sheets: Lỗi API Google Sheets: BadRequest
System.Net.Http.HttpRequestException: Lỗi API Google Sheets: BadRequest
   at adapter_BHYT.Services.GoogleSheetsService.<>c__DisplayClass15_0.<<GetSheetDataAsync>b__0>d.MoveNext() in D:\Hospital-TĐ-UB\Cảnh báo BHYT\GiamDInhBHYT\adapter_BHYT\adapter_BHYT\Services\GoogleSheetsService.cs:line 168
--- End of stack trace from previous location ---
   at Polly.Retry.AsyncRetryEngine.ImplementationAsync[TResult](Func`3 action, Context context, CancellationToken cancellationToken, ExceptionPredicates shouldRetryExceptionPredicates, ResultPredicates`1 shouldRetryResultPredicates, Func`5 onRetryAsync, Int32 permittedRetryCount, IEnumerable`1 sleepDurationsEnumerable, Func`4 sleepDurationProvider, Boolean continueOnCapturedContext)
   at Polly.AsyncPolicy.ExecuteAsync[TResult](Func`3 action, Context context, CancellationToken cancellationToken, Boolean continueOnCapturedContext)
   at adapter_BHYT.Services.GoogleSheetsService.GetSheetDataAsync() in D:\Hospital-TĐ-UB\Cảnh báo BHYT\GiamDInhBHYT\adapter_BHYT\adapter_BHYT\Services\GoogleSheetsService.cs:line 156
   at adapter_BHYT.Services.GoogleSheetsService.RefreshConfigAsync() in D:\Hospital-TĐ-UB\Cảnh báo BHYT\GiamDInhBHYT\adapter_BHYT\adapter_BHYT\Services\GoogleSheetsService.cs:line 99
2025-03-13 17:56:24.043 +07:00 [INF] Đang cập nhật cấu hình từ Google Sheets
2025-03-13 17:56:24.587 +07:00 [INF] Cấu hình đã được cập nhật thành công. Đã tải 3 mục
2025-03-13 19:02:46.551 +07:00 [FTL] Ứng dụng bị lỗi và dừng lại
System.IO.InvalidDataException: Failed to load configuration from file 'D:\Hospital-TĐ-UB\Cảnh báo BHYT\GiamDInhBHYT\adapter_BHYT\adapter_BHYT\bin\Debug\net8.0\appsettings.json'.
 ---> System.FormatException: Could not parse the JSON file.
 ---> System.Text.Json.JsonReaderException: 'l' is an invalid start of a property name. Expected a '"'. LineNumber: 22 | BytePositionInLine: 14.
   at System.Text.Json.ThrowHelper.ThrowJsonReaderException(Utf8JsonReader& json, ExceptionResource resource, Byte nextByte, ReadOnlySpan`1 bytes)
   at System.Text.Json.Utf8JsonReader.ReadSingleSegment()
   at System.Text.Json.Utf8JsonReader.Read()
   at System.Text.Json.JsonDocument.Parse(ReadOnlySpan`1 utf8JsonSpan, JsonReaderOptions readerOptions, MetadataDb& database, StackRowStack& stack)
   at System.Text.Json.JsonDocument.Parse(ReadOnlyMemory`1 utf8Json, JsonReaderOptions readerOptions, Byte[] extraRentedArrayPoolBytes, PooledByteBufferWriter extraPooledByteBufferWriter)
   at System.Text.Json.JsonDocument.Parse(ReadOnlyMemory`1 json, JsonDocumentOptions options)
   at System.Text.Json.JsonDocument.Parse(String json, JsonDocumentOptions options)
   at Microsoft.Extensions.Configuration.Json.JsonConfigurationFileParser.ParseStream(Stream input)
   at Microsoft.Extensions.Configuration.Json.JsonConfigurationFileParser.Parse(Stream input)
   at Microsoft.Extensions.Configuration.Json.JsonConfigurationProvider.Load(Stream stream)
   --- End of inner exception stack trace ---
   at Microsoft.Extensions.Configuration.Json.JsonConfigurationProvider.Load(Stream stream)
   at Microsoft.Extensions.Configuration.FileConfigurationProvider.Load(Boolean reload)
   --- End of inner exception stack trace ---
   at Microsoft.Extensions.Configuration.FileConfigurationProvider.HandleException(ExceptionDispatchInfo info)
   at Microsoft.Extensions.Configuration.FileConfigurationProvider.Load(Boolean reload)
   at Microsoft.Extensions.Configuration.FileConfigurationProvider.Load()
   at Microsoft.Extensions.Configuration.ConfigurationRoot..ctor(IList`1 providers)
   at Microsoft.Extensions.Configuration.ConfigurationBuilder.Build()
   at Microsoft.Extensions.Hosting.HostBuilder.InitializeAppConfiguration()
   at Microsoft.Extensions.Hosting.HostBuilder.Build()
   at adapter_BHYT.Program.Main(String[] args) in D:\Hospital-TĐ-UB\Cảnh báo BHYT\GiamDInhBHYT\adapter_BHYT\adapter_BHYT\Program.cs:line 24
2025-03-13 19:03:12.266 +07:00 [FTL] Ứng dụng bị lỗi và dừng lại
System.InvalidOperationException: Unable to resolve service for type 'adapter_BHYT.Services.DatabaseService' while attempting to activate 'adapter_BHYT.Services.WebSocketService'.
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateArgumentCallSites(ServiceIdentifier serviceIdentifier, Type implementationType, CallSiteChain callSiteChain, ParameterInfo[] parameters, Boolean throwIfCallSiteNotFound)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateConstructorCallSite(ResultCache lifetime, ServiceIdentifier serviceIdentifier, Type implementationType, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.TryCreateExact(ServiceDescriptor descriptor, ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain, Int32 slot)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.TryCreateExact(ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateCallSite(ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.GetCallSite(ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateArgumentCallSites(ServiceIdentifier serviceIdentifier, Type implementationType, CallSiteChain callSiteChain, ParameterInfo[] parameters, Boolean throwIfCallSiteNotFound)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateConstructorCallSite(ResultCache lifetime, ServiceIdentifier serviceIdentifier, Type implementationType, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.TryCreateExact(ServiceDescriptor descriptor, ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain, Int32 slot)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.TryCreateExact(ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateCallSite(ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.GetCallSite(ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.CreateServiceAccessor(ServiceIdentifier serviceIdentifier)
   at System.Collections.Concurrent.ConcurrentDictionary`2.GetOrAdd(TKey key, Func`2 valueFactory)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(ServiceIdentifier serviceIdentifier, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService(IServiceProvider provider, Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService[T](IServiceProvider provider)
   at adapter_BHYT.Program.Main(String[] args) in D:\Hospital-TĐ-UB\Cảnh báo BHYT\GiamDInhBHYT\adapter_BHYT\adapter_BHYT\Program.cs:line 27
2025-03-13 21:09:54.457 +07:00 [INF] Đang làm mới cấu hình từ Google Sheets...
2025-03-13 21:09:54.511 +07:00 [INF] Đang tải cấu hình API từ Google Sheets...
2025-03-13 21:09:55.106 +07:00 [INF] Đã tải 3 cấu hình API từ Google Sheets
2025-03-13 21:09:55.108 +07:00 [INF] Đã làm mới cấu hình từ Google Sheets thành công
2025-03-13 21:10:10.636 +07:00 [INF] Đang làm mới cấu hình từ Google Sheets...
2025-03-13 21:10:10.637 +07:00 [INF] Đang tải cấu hình API từ Google Sheets...
2025-03-13 21:10:10.945 +07:00 [INF] Đã tải 3 cấu hình API từ Google Sheets
2025-03-13 21:10:10.946 +07:00 [INF] Đã làm mới cấu hình từ Google Sheets thành công
2025-03-13 21:12:04.543 +07:00 [INF] Đang làm mới cấu hình từ Google Sheets...
2025-03-13 21:12:04.592 +07:00 [INF] Đang tải cấu hình API từ Google Sheets...
2025-03-13 21:12:05.151 +07:00 [INF] Đã tải 3 cấu hình API từ Google Sheets
2025-03-13 21:12:05.153 +07:00 [INF] Đã làm mới cấu hình từ Google Sheets thành công
2025-03-13 21:12:22.774 +07:00 [INF] Đang làm mới cấu hình từ Google Sheets...
2025-03-13 21:12:22.833 +07:00 [INF] Đang tải cấu hình API từ Google Sheets...
2025-03-13 21:12:23.413 +07:00 [INF] Đã tải 3 cấu hình API từ Google Sheets
2025-03-13 21:12:23.416 +07:00 [INF] Đã làm mới cấu hình từ Google Sheets thành công
2025-03-13 21:12:25.600 +07:00 [INF] Đang làm mới cấu hình từ Google Sheets...
2025-03-13 21:12:25.600 +07:00 [INF] Đang tải cấu hình API từ Google Sheets...
2025-03-13 21:12:25.880 +07:00 [INF] Đã tải 3 cấu hình API từ Google Sheets
2025-03-13 21:12:25.882 +07:00 [INF] Đã làm mới cấu hình từ Google Sheets thành công
2025-03-13 21:12:57.576 +07:00 [INF] Đang làm mới cấu hình từ Google Sheets...
2025-03-13 21:12:57.624 +07:00 [INF] Đang tải cấu hình API từ Google Sheets...
2025-03-13 21:12:58.166 +07:00 [INF] Đã tải 3 cấu hình API từ Google Sheets
2025-03-13 21:12:58.170 +07:00 [INF] Đã làm mới cấu hình từ Google Sheets thành công
2025-03-13 22:08:52.001 +07:00 [INF] Đang làm mới cấu hình từ Google Sheets...
2025-03-13 22:08:52.054 +07:00 [INF] Đang tải cấu hình API từ Google Sheets...
2025-03-13 22:08:52.700 +07:00 [INF] Đã tải 3 cấu hình API từ Google Sheets
2025-03-13 22:08:52.703 +07:00 [INF] Đã làm mới cấu hình từ Google Sheets thành công
